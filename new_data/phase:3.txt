# **ğŸ“Œ Phase 3: Backend API Development**  
Now that the **UI structure and workflows** are defined, we move on to the **backend API development** phase. This phase focuses on **building the core functionalities**, **securing the system**, and ensuring **real-time tracking**.

---

## **ğŸ”¹ 3.1 Backend Goals**
âœ… **Scalable & Fast** â€“ Optimized for large-scale tracking  
âœ… **Secure & Role-Based** â€“ Workers vs Admins permissions  
âœ… **Real-time Tracking** â€“ Shipment & inventory updates  
âœ… **Efficient Data Storage** â€“ Relational DB for fast lookups  
âœ… **API Documentation** â€“ Swagger/Postman  

---

## **ğŸ”¹ 3.2 Backend Technology Stack**
| **Component** | **Technology** |
|--------------|--------------|
| **Server** | Node.js (Express.js) OR FastAPI (Python) |
| **Database** | PostgreSQL / MySQL |
| **Authentication** | JWT (JSON Web Tokens) |
| **Storage** | AWS S3 (for QR code images, reports) |
| **Real-time Updates** | WebSockets / Firebase |
| **API Documentation** | Swagger / Postman |
| **Deployment** | AWS EC2 / DigitalOcean |
| **Caching (Optional)** | Redis (for quick inventory lookups) |

---

## **ğŸ”¹ 3.3 Database Schema & Relationships**
ğŸ’¡ **Main Tables**  
âœ… **Users Table** â€“ Tracks workers/admins  
âœ… **Cylinders Table** â€“ Stores inventory & QR codes  
âœ… **Shipments Table** â€“ Logs shipment data & workers  
âœ… **Refills Table** â€“ Tracks refill process  

---

### **ğŸ“Œ 1ï¸âƒ£ Users Table**
Stores **worker and admin accounts** with role-based access.
| Column | Type | Description |
|--------|------|-------------|
| `id` | INT (Primary Key) | Unique identifier for user |
| `username` | VARCHAR(255) | Unique worker/admin username |
| `password_hash` | TEXT | Secure password storage |
| `role` | ENUM | worker, admin |
| `created_at` | TIMESTAMP | Account creation time |

---

### **ğŸ“Œ 2ï¸âƒ£ Cylinders Table**
Tracks **each cylinder's status** (Available, Sent, In Refill, etc.).
| Column | Type | Description |
|--------|------|-------------|
| `id` | INT (Primary Key) | Unique cylinder ID |
| `qr_code` | VARCHAR(255) | QR Code data (Generated on creation) |
| `status` | ENUM | Available, Sent, Returned, In Refill, Trashed |
| `created_at` | TIMESTAMP | Cylinder registration time |

---

### **ğŸ“Œ 3ï¸âƒ£ Shipments Table**
Tracks **each shipment, including the worker responsible**.
| Column | Type | Description |
|--------|------|-------------|
| `id` | INT (Primary Key) | Shipment ID |
| `cylinder_id` | INT (Foreign Key) | Linked to Cylinders Table |
| `sent_by_worker_id` | INT (Foreign Key) | Worker who shipped |
| `received_by_worker_id` | INT (Foreign Key) | Worker who confirmed return/refill |
| `sent_to` | VARCHAR(255) | Customer/Refill Station receiving the shipment |
| `status` | ENUM | Shipped, Received, In Refill, etc. |
| `timestamp` | TIMESTAMP | Shipment processing time |

---

## **ğŸ”¹ 3.4 API Endpoints & Business Logic**
### **ğŸ“Œ 1ï¸âƒ£ Authentication**
âœ… `POST /api/auth/login` â†’ Worker/Admin Login  
âœ… `POST /api/auth/register` â†’ Register a New User  
âœ… `GET /api/auth/logout` â†’ Logout  

---

### **ğŸ“Œ 2ï¸âƒ£ Cylinder Management**
âœ… `POST /api/cylinders/add` â†’ Add a new cylinder (Admin only)  
âœ… `POST /api/cylinders/trash` â†’ Remove cylinder from inventory (Admin only)  
âœ… `POST /api/cylinders/reprint` â†’ Re-generate QR code (Admin only)  
âœ… `POST /api/cylinders/ship` â†’ Ship Cylinders  
âœ… `POST /api/cylinders/return` â†’ Mark Cylinders as Returned  
âœ… `POST /api/cylinders/refill/send` â†’ Send Cylinders for Refill  
âœ… `POST /api/cylinders/refill/receive` â†’ Mark Refilled Cylinders as Received  

---

### **ğŸ“Œ 3ï¸âƒ£ Admin Reports & Analytics**
âœ… `GET /api/admin/shipments` â†’ View all shipments & workers handling them  
âœ… `GET /api/admin/inventory` â†’ View cylinder stock summary  
âœ… `GET /api/admin/reports` â†’ Generate analytics & trends  

---

## **ğŸ”¹ 3.5 Security & Performance**
âœ… **Role-Based Access Control (RBAC)** â€“ Workers vs Admins  
âœ… **JWT Authentication** â€“ Secure login sessions  
âœ… **Rate Limiting & API Throttling** â€“ Prevent spam/scanning abuse  
âœ… **Data Encryption** â€“ Secure sensitive info  
âœ… **Caching (Redis)** â€“ Optimize inventory lookups  

---

