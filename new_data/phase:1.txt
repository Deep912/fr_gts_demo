# **ğŸ“Œ Phase 1: Planning & Architecture (Finalized with Updates)**  
This phase defines the **system structure, workflows, roles, database, API design, and tech stack** for the **Gas Cylinder Tracking Web App**.

---

## **ğŸ”¹ 1.1 User Roles & Responsibilities**
### **ğŸ“Œ 1ï¸âƒ£ Warehouse Workers (Mobile Web UI)**
âœ… **Use phone camera to scan cylinders**  
âœ… **Ship cylinders to customers**  
âœ… **Receive and track returned cylinders**  
âœ… **Send empty cylinders for refilling**  
âœ… **Receive refilled cylinders back into stock**  

ğŸ’¡ **Key Considerations for Workers UI**  
- **Mobile-optimized web app** (fast, simple UI)  
- **Touch-friendly interface** (large buttons, simple navigation)  
- **QR code scanning directly from browser**  

---

### **ğŸ“Œ 2ï¸âƒ£ Admins (Desktop Web UI)**
âœ… **Track all shipments in real-time**  
âœ… **Monitor pending returns and refills**  
âœ… **Generate reports on cylinder movements**  
âœ… **Manage workers and refill stations**  
âœ… **Add new cylinders to inventory**  
âœ… **Re-print QR codes for existing cylinders**  
âœ… **Trash (remove) cylinders from inventory**  
âœ… **See which worker handled each shipment**  

ğŸ’¡ **Key Considerations for Admin UI**  
- **Dashboard with inventory status & trends**  
- **Live shipment tracking**  
- **Advanced filtering & analytics for reports**  
- **Worker activity monitoring**  

---

## **ğŸ”¹ 1.2 System Workflows**
| **Action** | **Workers UI (Mobile Web)** | **Admin UI (Desktop Web)** |
|------------|----------------------------|----------------------------|
| **Scan & Ship Cylinders** | Workers scan QR codes and confirm shipment | Admins track which worker handled the shipment |
| **Receive Returned Cylinders** | Workers scan and update return status | Admins see worker who confirmed return |
| **Send Cylinders for Refill** | Workers scan empty cylinders and send them | Admins monitor worker responsible for refill shipments |
| **Receive Refilled Cylinders** | Workers scan refilled cylinders | Admins see worker confirmation logs |
| **Track Inventory & Reports** | Workers check current stock | Admins generate analytics & reports |
| **Add New Cylinders** | âŒ Not available | âœ… Admins register new cylinders |
| **Re-print QR Codes** | âŒ Not available | âœ… Admins can generate & print new QR codes |
| **Trash Cylinders** | âŒ Not available | âœ… Admins can remove cylinders from inventory |

---

## **ğŸ”¹ 1.3 Technology Stack**
| **Component**  | **Technology**  |
|--------------|----------------|
| **Frontend (Web)** | React.js (for both Workers UI & Admin UI) |
| **UI Framework** | Tailwind CSS / Material-UI (MUI) |
| **QR Code Scanning** | `navigator.mediaDevices.getUserMedia` API (Web-based camera scanning) |
| **QR Code Generation** | qrcode.react / ZXing |
| **State Management** | Redux / React Context API |
| **Backend API** | Node.js (Express.js) / FastAPI |
| **Database** | PostgreSQL / MySQL |
| **Authentication** | JWT (JSON Web Tokens) |
| **Real-time Updates** | WebSockets / Firebase |
| **Hosting** | AWS / DigitalOcean / Vercel |
| **Reports & Analytics** | Chart.js / D3.js |
| **Monitoring & Logging** | Sentry / Datadog |

---

## **ğŸ”¹ 1.4 Database Schema**
To support **worker tracking, inventory control, and QR code generation**, we structure the database as follows:

### **ğŸ“Œ 1ï¸âƒ£ Users Table**
Stores **workers and admin accounts** with role-based access.
| Column | Type | Description |
|--------|------|-------------|
| `id` | INT (Primary Key) | Unique identifier for user |
| `username` | VARCHAR(255) | Unique worker/admin username |
| `password_hash` | TEXT | Secure password storage |
| `role` | ENUM | worker, admin |
| `created_at` | TIMESTAMP | When the account was created |

---

### **ğŸ“Œ 2ï¸âƒ£ Cylinders Table**
Tracks **each cylinder's status** (Available, Sent, In Refill, etc.).
| Column | Type | Description |
|--------|------|-------------|
| `id` | INT (Primary Key) | Unique identifier for each cylinder |
| `qr_code` | VARCHAR(255) | QR Code data (Generated on creation) |
| `status` | ENUM | Available, Sent, Returned, In Refill, Trashed |
| `created_at` | TIMESTAMP | When the cylinder was added |
| `updated_at` | TIMESTAMP | Last update time |

---

### **ğŸ“Œ 3ï¸âƒ£ Shipments Table**
Tracks **each shipment, including the worker responsible**.
| Column | Type | Description |
|--------|------|-------------|
| `id` | INT (Primary Key) | Unique identifier for shipment |
| `cylinder_id` | INT (Foreign Key) | Linked to Cylinders Table |
| `sent_by_worker_id` | INT (Foreign Key) | Tracks which worker sent the shipment |
| `received_by_worker_id` | INT (Foreign Key) | Tracks which worker confirmed return/refill |
| `sent_to` | VARCHAR(255) | Customer/Refill Station receiving the shipment |
| `status` | ENUM | Shipped, Received, In Refill, etc. |
| `timestamp` | TIMESTAMP | When the shipment was processed |

---

### **ğŸ“Œ 4ï¸âƒ£ Refills Table**
Tracks **cylinders that have been sent for refilling**.
| Column | Type | Description |
|--------|------|-------------|
| `id` | INT (Primary Key) | Unique identifier for refill request |
| `cylinder_id` | INT (Foreign Key) | Linked to Cylinders Table |
| `refill_station` | VARCHAR(255) | Station processing the refill |
| `status` | ENUM | Sent, Completed |
| `timestamp` | TIMESTAMP | When the refill was processed |

---

## **ğŸ”¹ 1.5 API Design**
### **ğŸ“Œ 1ï¸âƒ£ Authentication (JWT)**
âœ… `POST /api/auth/login` â†’ Worker/Admin Login  
âœ… `POST /api/auth/register` â†’ Register a New User  
âœ… `GET /api/auth/logout` â†’ Logout  

### **ğŸ“Œ 2ï¸âƒ£ Cylinder Management**
âœ… `POST /api/cylinders/add` â†’ Add a new cylinder (Admin only)  
âœ… `POST /api/cylinders/trash` â†’ Remove cylinder from inventory (Admin only)  
âœ… `POST /api/cylinders/reprint` â†’ Re-generate QR code (Admin only)  
âœ… `POST /api/cylinders/ship` â†’ Ship Cylinders  
âœ… `POST /api/cylinders/return` â†’ Mark Cylinders as Returned  
âœ… `POST /api/cylinders/refill/send` â†’ Send Cylinders for Refill  
âœ… `POST /api/cylinders/refill/receive` â†’ Mark Refilled Cylinders as Received  

### **ğŸ“Œ 3ï¸âƒ£ Admin Reports**
âœ… `GET /api/admin/shipments` â†’ View all shipments & workers handling them  
âœ… `GET /api/admin/inventory` â†’ View cylinder stock summary  
âœ… `GET /api/admin/reports` â†’ Generate analytics & trends  

---

## **ğŸ”¹ 1.6 What Might Be Missing?**
  
*QR Code Label Printing** â€“ Allow admins to **print/download QR labels**  
 
Overdue Shipments Alert** â€“ Notify admins if shipments are delayed  
